<template>
  <require from="./list.css"></require>
  <div class="row justify-content-center ">
    <div class="col row justify-content-center fixed">
      <div class="col-10 row head justify-content-between">
        <div class="col-2 m-0 p-0 pb-3">
          <h3><span class="cursor-pointer bold">Categories</span></h3>
        </div>
        <div class="col-3 text-right m-0 p-0 pb-3">
          <a href="/categories/new" class="btn btn-dark">CREATE CATEGORY</a>
        </div>
      </div>
      <div class="col-10 row border main-body">
        <div class="col-12 tab">
          <div href="/products" click.delegate="goToProducts()" class="pr-5 has-cursor-pointer">Products</div>
          <div href="/categories" class="pr-5 has-cursor-pointer"><span class="bold">Categories</span></div>
        </div>

        <div class="col-12 row">
          <div class="col-1 tab search-name" >
            <h6 class="pt-2">Search:</h6>
          </div>
          <div class="col-11 tab search-bar">
            <input type="text"  class="form-control" value.bind="filterStr" input.delegate="onSearchFilterChanged()" >
          </div>

        </div>


        <div class="col-12 tab m-0 p-0">
          <table class="table table-striped">
            <thead>
            <tr class="bold">
              <td width="15%" class="table-header" click.delegate="sortBy('categoryName')"><span>Name</span></td>
              <td width="25%" class="table-header" click.delegate="sortBy('productCategoryTypeId')"><span>Catalog</span></td>
              <td width="30%" class="table-header" click.delegate="sortBy('longDescription')"><span>Description</span></td>
              <td width="15%" class="table-header" click.delegate="sortBy('primaryParentCategoryId')"><span class="cursor-pointer">Parent category</span></td>
            </tr>
            </thead>

            <tbody>
            <tr  repeat.for="category of filteredCategories" id="${ category.productCategoryId }" click.delegate='onClickCategory(category)'>
              <td>${ category.categoryName }</td>
              <td>${ category._toOne_ProductCategoryType.description }</td>
              <td>${ category.longDescription }</td>
              <td>${ category._toOne_PrimaryParentProductCategory.categoryName ? category._toOne_PrimaryParentProductCategory.categoryName : category.primaryParentCategoryId }</td>
            </tr>
            </tbody>

          </table>
        </div>
      </div>

    </div>

  </div>
</template>
